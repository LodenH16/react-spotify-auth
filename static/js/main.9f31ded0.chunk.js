(this["webpackJsonpreact-spotify-auth-example"]=this["webpackJsonpreact-spotify-auth-example"]||[]).push([[0],{28:function(e,t,a){},48:function(e,t,a){e.exports=a.p+"static/media/examplePfp.f6c53af4.jpg"},50:function(e,t,a){e.exports=a(99)},63:function(e,t,a){e.exports=a.p+"static/media/spotify~bkRyBIbO.9c3dc69e.svg"},64:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);a(28);var n=a(1),s=a.n(n),c=a(42),o=a.n(c),r=a(49),l=a(20),i=a(17),m=a.n(i);const p="user-top-read",u="user-read-email",d="user-read-private",f=window.location.hash.substring(1).split("&").reduce((e,t)=>{if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});var h={rsaSpotifyBtn:"_styles-module__rsaSpotifyBtn__3W0G9",rsaSpotifyLogo:"_styles-module__rsaSpotifyLogo__wV9HY"},y=a(63);class g extends n.Component{constructor(e){super(e),this.getHash=()=>window.parent.location.hash.substring(1).split("&").reduce((e,t)=>{if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{}),this.handleClick=e=>{e.preventDefault();const t="https://accounts.spotify.com/authorize?response_type=token"+"&client_id=".concat(this.props.clientID)+"&scope=".concat(this.props.scopes.join("%20"))+"&redirect_uri=".concat(this.props.redirectUri)+"&show_dialog=true";window.location=t},this.state={isAuthenticatedWithSpotify:!1}}componentDidMount(){const e=f.access_token;e&&(document.cookie="spotifyAuthToken=".concat(e,"; max-age=").concat(3600,";"),this.props.onAccessToken(e))}render(){return s.a.createElement("div",{className:this.props.containerClassName||h.rsaSpotifyContainer},s.a.createElement("button",{className:this.props.btnClassName||h.rsaSpotifyBtn,onClick:e=>this.handleClick(e)},s.a.createElement("img",{src:y,alt:"Spotify Logo",className:h.rsaSpotifyLogo}),s.a.createElement("span",{className:"dispText"},this.props.title," ")))}}g.defaultProps={redirectUri:"http://localhost:3000/callback",clientID:"1a70ba777fec4ffd9633c0c418bdcf39",scopes:[d,u],onAccessToken:()=>console.log("I have an access token"),title:"Continue with Spotify"};a(64);var E=a(6);a(97),a(98);var k=e=>s.a.createElement(E.h,null,s.a.createElement(E.c,{style:{width:"22rem"}},s.a.createElement(E.e,{className:"img-fluid",src:e.track.album.images[0].url,waves:!0}),s.a.createElement(E.d,null,s.a.createElement(E.g,null,e.track.name),s.a.createElement(E.f,null,e.track.artists.map(e=>e.name).join(" ")," ",s.a.createElement("br",null),e.track.album.name),s.a.createElement(E.b,{href:e.track.external_urls.spotify},"Listen on Spotify")))),b=a(48),v=a.n(b);var w=()=>{const e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(()=>{c(m.a.get("spotifyAuthToken"))},[m.a.get("spotifyAuthToken")]);return s.a.createElement("div",{className:"app"},s.a.createElement(E.i,null,m.a.get("spotifyAuthToken")?s.a.createElement(s.a.Fragment,null,s.a.createElement(E.n,null,s.a.createElement("h1",null,"Hi! How's it going?")),s.a.createElement(l.b.Provider,{value:a},s.a.createElement(l.c,null,e=>e&&e.data?s.a.createElement(s.a.Fragment,null,s.a.createElement(E.h,{style:{maxWidth:"22rem",padding:"0 0 1rem 1rem"}},s.a.createElement(E.c,null,s.a.createElement(E.e,{className:"img-fluid",src:e.data.images[0]?e.data.images[0].url:v.a,alt:"Your Spotify Profile Picture",waves:!0}),s.a.createElement(E.d,{style:{padding:"1rem"}},s.a.createElement(E.g,null,"Welcome, ",e.data.display_name),s.a.createElement(E.f,null,"Here's some of your top tracks, as listed by Spotify."))))):s.a.createElement("p",null,"Loading...")),s.a.createElement(E.n,{className:"masonry-with-columns"},s.a.createElement(l.d,{type:"tracks"},(e,t,a)=>e&&e.data?e.data.items.map((e,t)=>s.a.createElement(s.a.Fragment,null,s.a.createElement(k,{track:e}))):null))),s.a.createElement(E.b,{onClick:()=>{m.a.remove("spotifyAuthToken",{path:"react-spotify-auth"}),window.location="/react-spotify-auth"}},"Logout")):s.a.createElement("div",{className:"login-page"},s.a.createElement("h1",null,"View your top songs"),s.a.createElement("h2",null,"Sign in to get started"),s.a.createElement(g,{redirectUri:"http://kevinjiang.ca/react-spotify-auth",clientID:"1a70ba777fec4ffd9633c0c418bdcf39",scopes:[d,u,p],containerClassName:"spotifyBtn"}))))};o.a.render(s.a.createElement(w,null),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.9f31ded0.chunk.js.map